<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDI-12 for Arduino: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDI-12 for Arduino
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
   <div id="projectbrief">An Arduino library for SDI-12 communication without requiring any additional hardware.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SDI-12 for Arduino Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#mainpage_intro">An Introduction</a><ul><li class="level2"><a href="#mainpage_rename">Renaming Notice</a></li>
</ul>
</li>
<li class="level1"><a href="#mainpage_getting_started">Getting Started</a></li>
<li class="level1"><a href="#mainpage_origins">Origins and Inherited Limitations</a></li>
<li class="level1"><a href="#mainpage_compatibility">Compatibility Considerations</a></li>
<li class="level1"><a href="#mainpage_variants">Variants and Branches</a><ul><li class="level2"><a href="#mainpage_master">EnviroDIY_SDI12</a></li>
<li class="level2"><a href="#mainpage_pcint3">EnviroDIY_SDI12_PCINT3</a></li>
<li class="level2"><a href="#mainpage_extints">EnviroDIY_SDI12_ExtInts</a></li>
</ul>
</li>
<li class="level1"><a href="#mainpage_contribute">Contribute</a></li>
<li class="level1"><a href="#mainpage_license">License</a></li>
<li class="level1"><a href="#mainpage_credits">Credits</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<h1><a class="anchor" id="mainpage_intro"></a>
An Introduction</h1>
<p>This is an Arduino library for SDI-12 communication with a wide variety of environmental sensors. It provides a general software solution, without requiring any additional hardware, to implement the SDI-12 communication protocol between an Arduino-based data logger and SDI-12-enabled sensors.</p>
<p><a href="http://www.sdi-12.org/">SDI-12</a> is an asynchronous, ASCII, serial communications protocol that was developed for intelligent sensory instruments that typically monitor environmental data. <a href="http://en.wikipedia.org/wiki/SDI-12">Advantages of SDI-12</a> include the ability to use a single available data channel for many sensors.</p>
<p>This work is motivated by the <a href="http://envirodiy.org/">EnviroDIY community</a> vision to create an open source hardware and software stack to deliver near real time environmental data from wireless sensor networks, such as the Arduino-compatible <a href="http://envirodiy.org/mayfly/">EnviroDIY™ Mayfly Data Logger</a>.</p>
<h2><a class="anchor" id="mainpage_rename"></a>
Renaming Notice</h2>
<p><b>As of version 2.0.0 this library was renamed from "Arduino-SDI-12" to simply "SDI-12" to comply with requirements for inclusion in the Arduino.cc's IDE and Library Manager.</b></p>
<h1><a class="anchor" id="mainpage_getting_started"></a>
Getting Started</h1>
<p>Learn more, below, about this library's:</p><ul>
<li><a href="https://github.com/EnviroDIY/Arduino-SDI-12#origins-and-inherited-limitations">Origins and Inherited Limitations</a>;</li>
<li><a href="https://github.com/EnviroDIY/Arduino-SDI-12#compatibility-considerations">Compatibility Considerations</a>;</li>
<li><a href="https://github.com/EnviroDIY/Arduino-SDI-12#variants-and-branches">Variants and Branches</a> we created to overcome some limitations.</li>
</ul>
<p>Try running our <a href="https://github.com/EnviroDIY/Arduino-SDI-12/tree/master/examples">Example sketches</a> with your Arduino board and SDI-12 sensor.</p>
<p>Full details on the library functionality can be found on github pages: <a href="https://envirodiy.github.io/Arduino-SDI-12/">https://envirodiy.github.io/Arduino-SDI-12/</a></p>
<h1><a class="anchor" id="mainpage_origins"></a>
Origins and Inherited Limitations</h1>
<p>This library was developed from the <a href="https://github.com/arduino/Arduino/tree/master/hardware/arduino/avr/libraries/SoftwareSerial">SoftwareSerial</a> library that is a built-in <a href="https://www.arduino.cc/en/Reference/Libraries">standard Arduino library</a>. It was further modified to use a timer to improve read stability and decrease the amount of time universal interrupts are disabled using logic from <a href="https://github.com/SlashDevin/NeoSWSerial">NeoSWSerial</a>.</p>
<p>The most obvious "limitation" is that this library will conflict with all other libraries that make use of pin change interrupts. You will be unable to compile them together. Some other libraries using pin change interrupts include <a href="https://github.com/arduino/Arduino/tree/master/hardware/arduino/avr/libraries/SoftwareSerial">SoftwareSerial</a>, <a href="https://github.com/SlashDevin/NeoSWSerial">NeoSWSerial</a>, <a href="https://github.com/GreyGnome/EnableInterrupt/">EnableInterrupt</a>, <a href="https://playground.arduino.cc/Main/PinChangeInt">PinChangeInt</a>, <a href="https://www.arduino.cc/en/Reference/Servo">Servo</a>, and quite a number of other libraries. See the notes under <a href="https://github.com/EnviroDIY/Arduino-SDI-12#variants-and-branches">Variants and Branches</a> below for advice in using this library in combination with such libraries.</p>
<p>Another non-trivial, but hidden limitation is that <em>all</em> interrupts are disabled during most of the transmission of each character, which can interfere with other processes. That includes other pin-change interrupts, clock/timer interrupts, external interrupts, and every other type of processor interrupt. This is particularly problematic for SDI-12, because SDI-12 operates at a very slow baud rate (only 1200 baud). This translates to ~8.3 mS of "radio silence" from the processor for each character that goes out via SDI-12, which adds up to ~380-810ms per command! Interrupts are enabled for the majority of the time while the processor is listening for responses.</p>
<p>For most AVR boards, this library will also conflict with the <a href="https://www.arduino.cc/reference/en/language/functions/advanced-io/tone/">tone</a> function because of its utilization of timer 2. There will be no obvious compile error, but because SDI-12 and the tone library may use different clock-prescaler functions, the results for both might be rather unexpected. All 8MHz AVR boards will also have unresolvable prescaler conflicts with <a href="https://github.com/SlashDevin/NeoSWSerial">NeoSWSerial</a>. The pre-scaler values needed for the SDI-12 functionality are set in the begin() function and reset to their original values in the end() function.</p>
<h1><a class="anchor" id="mainpage_compatibility"></a>
Compatibility Considerations</h1>
<p>This library has been tested with an Arduino Uno (AtMega328p), EnviroDIY Mayfly (AtMega1284p), Adafruit Feather 32u4 (AtMega32u4, identical to Arduino Leonardo), an Adafruit Feather M0 (SAMD21G18, identical to Arduino Zero), the ESP8266, and the ESP32. It should also work on an Arduino Mega (AtMega2560), Gemma/AtTiny board, and most other AVR processors running on the Arduino framework.</p>
<p>The Arduino Due, Arduino 101, and Teensy boards are not supported at this time. If you are interested in adding support for those boards, please send pull requests.</p>
<p>Due to the use of pin change interrupts, not all data pins are available for use with this SDI-12 library. Pin availability depends on the micro-controller. These pins will work on those processors:</p>
<p>This library requires the use of pin change interrupts (PCINT).</p>
<p>Not all Arduino boards have the same pin capabilities. The known compatibile pins for common variants are shown below:</p>
<p><b>AtMega328p / Arduino Uno:</b></p><ul>
<li>Any pin</li>
</ul>
<p><b>AtMega1284p / EnviroDIY Mayfly</b></p><ul>
<li>Any pin</li>
</ul>
<p><b>ATmega2560 / Arduino Mega or Mega 2560:</b></p><ul>
<li>0, 11, 12, 13, 14, 15, 50, 51, 52, 53, A8 (62), A9 (63), A10 (64), A11 (65), A12 (66), A13 (67), A14 (68), A15 (69)</li>
</ul>
<p><b>AtMega32u4 / Arduino Leonardo or Adafruit Feather:</b></p><ul>
<li>8, 9, 10, 11, 14 (MISO), 15 (SCK), 16 (MOSI)</li>
</ul>
<p><b>SAMD21G18 / Arduino Zero:</b></p><ul>
<li>Any pin (except 4 on the zero)</li>
</ul>
<p><b>ESP8266:</b></p><ul>
<li>Any GPIO, except GPIO16</li>
</ul>
<p><b>ESP32:</b></p><ul>
<li>Any GPIO</li>
</ul>
<p>Note that not all of these pins are available with our <a href="https://github.com/EnviroDIY/Arduino-SDI-12#variants-and-branches">Variants and Branches</a>, below.</p>
<h1><a class="anchor" id="mainpage_variants"></a>
Variants and Branches</h1>
<p>As we've described, the default "master" branch of this library will conflict with SoftwareSerial and any other library that monopolizes all pin change interrupt vectors for all AVR boards. To allow simultaneous use of SDI-12 and SoftwareSerial, we have created additional variants of these libraries that we maintain as separate branches of this repository. For background information, my be helpful to read our <a href="https://github.com/EnviroDIY/Arduino-SDI-12/wiki/2b.-Overview-of-Interrupts">Overview of Interrupts</a> wiki page or this <a href="https://thewanderingengineer.com/2014/08/11/arduino-pin-change-interrupts/">Arduino Pin Change Interrupts article</a>.</p>
<h2><a class="anchor" id="mainpage_master"></a>
EnviroDIY_SDI12</h2>
<p>EnviroDIY_SDI12 is the default master branch of this repository. It controls and monopolizes all pin change interrupt vectors, and can therefore have conflicts with any variant of SoftwareSerial and other libraries that use interrupts.</p>
<h2><a class="anchor" id="mainpage_pcint3"></a>
EnviroDIY_SDI12_PCINT3</h2>
<p>EnviroDIY_SDI12_PCINT3 is in the Mayfly branch of this repository, and was historically was called "SDI12_mod". It's been cropped to only control interrupt vector 3, or PCINT3 (D), which on the Mayfly (or Sodaq Mbili) corresponds to Pins D0-D7. It is designed to be compatible with <a href="https://github.com/EnviroDIY/SoftwareSerial_PCINT12">EnviroDIY_SoftwareSerial_PCINT12</a> library (which controls interrupt vectors PCINT1 (B) &amp; PCINT2 (C) / Mayfly pins D08-D15 &amp; D16-D23) and <a href="https://github.com/EnviroDIY/PcInt_PCINT0">EnviroDIY PcInt PCINT0</a> (which controls interrupt vectors PCINT0 (A) / Mayfly pins D24-D31/A0-A7). Note that different AtMega1284p boards have a different mapping from the physical PIN numbers to the listed digital PIN numbers that are printed on the board. One of the most helpful lists of pins and interrupts vectors is in the the <a href="https://github.com/GreyGnome/EnableInterrupt/wiki/Usage#PIN__PORT_BESTIARY">Pin/Port Bestiary wiki page for the Enable Interrupt library</a>.</p>
<h2><a class="anchor" id="mainpage_extints"></a>
EnviroDIY_SDI12_ExtInts</h2>
<p>EnviroDIY_SDI12_ExtInts is the ExtInt branch of this repository. It doesn't control any of the interrupts, but instead relies on an external interrupt management library (like <a href="https://github.com/GreyGnome/EnableInterrupt">EnableInterrupt</a>) to assign the SDI-12 receive data function to the right pin. This is the least stable because there's some extra delay because the external library is involved, but the use of timers in the SDI-12 library greatly increases it's stability. It's also the easiest to get working in combination with any other pin change interrupt based library. It can be paired with the <a href="https://github.com/EnviroDIY/SoftwareSerial_ExternalInts">EnviroDIY_SoftwareSerial_ExtInts</a> libraries (which is, by the way, extremely unstable).</p>
<p>If you would like to use a different pin change interrupt library, uncomment the line <code>#define SDI12_EXTERNAL_PCINT</code> in <a class="el" href="_s_d_i12_8h.html" title="This file contains the main class for the SDI-12 implementation.">SDI12.h</a> and recompile the library. Then, in your own code call <code><a class="el" href="group__interrupt__fxns.html#ga2b47db3032cdca8ac1f74c93fdad3e9e" title="Intermediary used by the ISR - passes off responsibility for the interrupt to the active object.">SDI12::handleInterrupt()</a></code> as the interrupt for the <a class="el" href="class_s_d_i12.html" title="The main class for SDI 12 instances.">SDI12</a> pin using the other interrupt library. Example j shows doing this in GreyGnome's <a href="https://github.com/GreyGnome/EnableInterrupt">EnableInterrupt</a> library.</p>
<h1><a class="anchor" id="mainpage_contribute"></a>
Contribute</h1>
<p>Open an <a href="https://github.com/EnviroDIY/Arduino-SDI-12/issues">issue</a> to suggest and discuss potential changes/additions.</p>
<p>For power contributors:</p>
<ol type="1">
<li>Fork it!</li>
<li>Create your feature branch: <code>git checkout -b my-new-feature</code></li>
<li>Commit your changes: &lsquo;git commit -am 'Add some feature&rsquo;<code></code></li>
<li><code>Push to the branch:</code>git push origin my-new-feature`</li>
<li>Submit a pull request :D</li>
</ol>
<h1><a class="anchor" id="mainpage_license"></a>
License</h1>
<p>The <a class="el" href="class_s_d_i12.html" title="The main class for SDI 12 instances.">SDI12</a> library code is released under the GNU Lesser Public License (LGPL 2.1) &ndash; See <a href="https://github.com/EnviroDIY/Arduino-SDI-12/blob/master/LICENSE">LICENSE-examples.md</a> file for details.</p>
<p>Example Arduino sketches are released under the BSD 3-Clause License &ndash; See <a href="https://github.com/EnviroDIY/Arduino-SDI-12/blob/master/LICENSE.md">LICENSE-examples.md</a> file for details.</p>
<p>Documentation is licensed as <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0</a> (CC-BY-SA) copyright.</p>
<h1><a class="anchor" id="mainpage_credits"></a>
Credits</h1>
<p><a href="http://envirodiy.org/">EnviroDIY</a>™ is presented by the Stroud Water Research Center, with contributions from a community of enthusiasts sharing do-it-yourself ideas for environmental science and monitoring.</p>
<p><a href="https://github.com/Kevin-M-Smith">Kevin M. Smith</a> was the primary developer of the SDI-12 library, with input from <a href="https://github.com/s-hicks2">S. Hicks</a> and <a href="https://github.com/aufdenkampe">Anthony Aufdenkampe</a>.</p>
<p><a href="https://github.com/SRGDamia1">Sara Damiano</a> is now the primary maintainer, with input from many <a href="https://github.com/EnviroDIY/Arduino-SDI-12/graphs/contributors">other contributors</a>.</p>
<p>This project has benefited from the support from the following funders:</p>
<ul>
<li>National Science Foundation, awards <a href="http://www.nsf.gov/awardsearch/showAward?AWD_ID=0724971">EAR-0724971</a>, <a href="http://www.nsf.gov/awardsearch/showAward?AWD_ID=1331856">EAR-1331856</a>, <a href="http://www.nsf.gov/awardsearch/showAward?AWD_ID=1339834">ACI-1339834</a></li>
<li>William Penn Foundation, grant 158-15</li>
<li>Stroud Water Research Center endowment </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
